"use strict";hui.define("hui_checklabel",["hui_checkbox"],function(){hui.CheckLabel=function(e,t){this.isFormItem=!0,hui.CheckLabel.superClass.call(this,e,"pending"),"pending"!=t&&this.enterControl()},hui.CheckLabel.prototype={getCheckLabelTpl:function(){var e=['<input class="#{0}" old="#{1}" value="#{1}" onblur="hui.Control.getById(\'#{2}\').getBlurHandler()" type="text" size="5" /> '].join("");return e},getUrlSave:function(){return this.url_save||this.parentControl.url_save},render:function(){hui.CheckLabel.superClass.prototype.render.call(this);var e=this,t=e.getMain();hui.util.appendHTML(t,hui.Control.format(e.getCheckLabelTpl(),e.getClass("textarea"),e.label,e.getId()))},initBehavior:function(){var e=this,t=e.getMain(),i=e.getIcon(),l=e.getLabel(),a=hui.cc(e.getClass("textarea"),t);e.setChecked(!!e.checked),i.onclick=hui.fn(e.getClickHandler,e),i.onselectstart=new Function("return false;"),l.ondblclick=hui.fn(e.getDbClickHandler,e),hui.util.onesc(a,hui.fn(e.onesc,e)),hui.util.onenter(a,hui.fn(e.onenter,e))},getDbClickHandler:function(){var e=this;e.editLabel()},getBlurHandler:function(){var e=this;e.saveLabel()},editLabel:function(){var e=this,t=e.getMain(),i=hui.cc(e.getClass("textarea"),t);hui.addClass(t,e.getClass("edit")),0===String(e.getPresetValue()).indexOf("-")&&(i.value=""),i.focus()},saveLabel:function(){var e=this,t=e.getPresetValue(),i=e.getMain(),l=hui.cc(e.getClass("label"),i),a=hui.cc(e.getClass("textarea"),i),n=a.value;""===n&&e.removeblank!==!1?(a.value=a.getAttribute("old"),window.confirm("Are you sure remove label?")?(e.saveLabelData(),e.dispose()):hui.removeClass(e.getMain(),e.getClass("edit"))):a.getAttribute("old")!==n?window.confirm("Are you sure change label?")?(e.saveLabelData(),e.setInnerHTML(l,n),a.setAttribute("old",n),hui.removeClass(i,e.getClass("edit"))):(hui.removeClass(i,e.getClass("edit")),e.onesc()):t>0&&hui.removeClass(i,e.getClass("edit"))},saveLabelData:function(){var e=this,t=e.getPresetValue(),i=e.getMain(),l=hui.cc(e.getClass("textarea"),i),a=l.value,n=e.getUrlSave();n?window.Requester.get(e.getUrlSave(),{data:{value:t,label:a},onsuccess:function(){e.refreshList()}}):e.refreshList()},refreshList:function(){},onesc:function(){var e=this,t=e.getMain(),i=hui.cc(e.getClass("textarea"),t);i.value=i.getAttribute("old")},onenter:function(){this.getBlurHandler()}},hui.inherits(hui.CheckLabel,hui.Checkbox),hui.util.importCssString(".hui_checklabel{float:left;}.hui_checklabel .hui_checklabel_label a{font-size:14px;}.hui_checklabel .hui_checklabel_icon{float:left;font-family:simsun;margin:1px 5px 0 0;border:1px solid #d9d9d9;font-size:15px;font-style:normal;line-height:1.1em;width:16px;height:16px;cursor:pointer;overflow:hidden;}.hui_checklabel .hui_checklabel_label{float:left;font-family:arial;color:#666666;font-size:14px;line-height:20px;padding-left:0px;padding-right:10px;cursor:pointer;}.hui_checklabel .hui_checklabel_icon{color:#1ba8eb;text-indent:-100px;}.hui_checklabel .hui_checklabel_textarea{float:left;font-family:arial;font-size:14px;border:0px;padding-left:2px;min-width:30px;border:1px solid #eee;margin-top:0px; margin-left: -3px;display:none;}.hui_checklabel .hui_checklabel_remove{cursor:pointer;font-family:arial;margin:0px 3px;}.hui_checklabel .hui_checklabel_remove:hover{color:#fff;background-color:red;}.hui_checklabel_checked .hui_checklabel_icon{visibility:visible;color:#68bf4a;text-indent:3px;}.hui_checklabel_edit .hui_checklabel_label{display:none;}.hui_checklabel_edit .hui_checklabel_textarea{display:inline;}")});