"use strict";hui.define("hui_slider",["hui_util","hui_draggable","hui_control"],function(){hui.Slider=function(i,e){hui.Slider.superClass.call(this,i,"pending"),this.minValue=void 0===this.minValue?0:Number(this.minValue),this.maxValue=void 0===this.maxValue?100:Number(this.maxValue),this.tickStep=void 0===this.tickStep?1:Number(this.tickStep),this.width=void 0===this.width?300:Number(this.width),this.smallChange=void 0===this.smallChange?1:Number(this.smallChange),"pending"!=e&&this.enterControl()},hui.Slider.prototype={getMainTpl:function(){var i='<div class="hui_slider_layer">    <div class="hui_slider_leftside">        <input type="text" class="hui_slider_leftinput" onblur="hui.Control.getById(\'#{0}\').setLeftValue(this.value)" />        <span class="hui_slider_min" style="display:none;">0</span>    </div>    <div class="hui_slider_rightside">        <span class="hui_slider_max" style="display:none;">20</span>        <input type="text" class="hui_slider_rightinput" onblur="hui.Control.getById(\'#{0}\').setRightValue(this.value)" />    </div>    <div class="hui_slider_scrollbar">        <div class="hui_slider_inner">&nbsp;</div>    </div>    <div class="hui_slider_ticks"></div>    <div class="hui_slider_percent"></div>    <div class="hui_slider_leftpoint"></div>    <div class="hui_slider_rightpoint"></div></div><div style="clear:both; overflow:hidden; font-size:0px;line-height:0px;height:1px;">&nbsp;</div>';return i},getTickTpl:function(){var i='<div class="hui_slider_unit" style="left:#{1}px;">    <span class="hui_slider_line">|</span>    <span class="hui_slider_num">#{0}</span></div>';return i},showTicks:function(){if(this.ticks){for(var i=this,e=i.getMain(),t=i.getTickTpl(),l=i.minValue,n=i.maxValue,s=i.tickStep,r=i.width-1,h="",a=l-l%s+(l%s===0?0:s);n>=a;a+=s)h+=hui.Control.format(t,a,(a-l)*r/(i.maxValue-i.minValue));i.setInnerHTML(hui.cc("hui_slider_ticks",e),h)}},showLabels:function(){var i,e,t=this,l=t.getMain();(void 0===t.labels||"both"===t.labels||"left"===t.labels)&&(i=hui.cc("hui_slider_min",l),t.setInnerHTML(i,t.minValue),i.style.display="inline"),(void 0===t.labels||"both"===t.labels||"right"===t.labels)&&(e=hui.cc("hui_slider_max",l),t.setInnerHTML(e,t.maxValue),e.style.display="inline")},render:function(){hui.Slider.superClass.prototype.render.call(this);var i=this,e=i.getMain();i.setInnerHTML(i,hui.Control.format(i.getMainTpl(),i.getId())),hui.cc("hui_slider_layer",e).style.width=i.width+"px",i.showTicks(),i.showLabels(),i.setDisabled(!!i.disabled)},initBehavior:function(){var i=this,e=i.getMain();i.handler1=hui.Draggable(hui.cc("hui_slider_leftpoint",e),{preventDefault:!0,move:function(){if(!this.moving){this.moving=!0,i.handler2.elem.style.zIndex=999;var t=this.nowPoint.x-this.startPoint.x,l=this.oldPosition.left+t;l=0>l?0:l>i.width?i.width:l,e.leftPercent=l/i.width,e.leftPercent>e.rightPercent&&(e.leftPercent=e.rightPercent),i.setLeftValue(i.minValue+(i.maxValue-i.minValue)*e.leftPercent),i.onmove(),this.moving=!1}},revert:!1,autoTop:!1}),i.handler2=hui.Draggable(hui.cc("hui_slider_rightpoint",e),{preventDefault:!0,move:function(){if(!this.moving){this.moving=!0,i.handler1.elem.style.zIndex=999;var t=this.nowPoint.x-this.startPoint.x,l=this.oldPosition.left+t;l=0>l?0:l>i.width?i.width:l,e.rightPercent=l/i.width,i.setRightValue(i.minValue+(i.maxValue-i.minValue)*e.rightPercent),i.onmove(),this.moving=!1}},revert:!1,autoTop:!1}),i.rangeSelection||(hui.cc("hui_slider_leftpoint",e).style.display="none",hui.cc("hui_slider_leftinput",e).style.display="none"),i.setValue(void 0!==i.value?i.value:[i.minValue,i.maxValue])},onmove:new Function,getLeftPercent:function(){return this.getMain().leftPercent},getRightPercent:function(){return this.getMain().rightPercent},getLeftValue:function(){var i=this,e=i.getMain(),t=hui.cc("hui_slider_leftinput",e).value;return t},getRightValue:function(){var i=this,e=i.getMain(),t=hui.cc("hui_slider_rightinput",e).value;return t},setLeftValue:function(i){var e=this,t=e.getMain();hui.cc("hui_slider_leftinput",t).value=Math.round(i/e.smallChange)*e.smallChange,i=i<e.minValue?e.minValue:i>e.maxValue?e.maxValue:Number(i),t.leftPercent=(i-e.minValue)/(e.maxValue-e.minValue),t.leftPercent>t.rightPercent&&(t.leftPercent=t.rightPercent,hui.cc("hui_slider_leftinput",t).value=Math.round((e.minValue+(e.maxValue-e.minValue)*t.rightPercent)/e.smallChange)*e.smallChange),e.handler1.elem.style.left=e.width*t.leftPercent+"px",hui.cc("hui_slider_inner",t).style.left=e.width*t.leftPercent+"px"},setRightValue:function(i){var e=this,t=e.getMain();hui.cc("hui_slider_rightinput",t).value=Math.round(i/e.smallChange)*e.smallChange,i=i<e.minValue?e.minValue:i>e.maxValue?e.maxValue:Number(i),t.rightPercent=(i-e.minValue)/(e.maxValue-e.minValue),t.rightPercent<t.leftPercent&&(t.rightPercent=t.leftPercent,hui.cc("hui_slider_rightinput",t).value=Math.round((e.minValue+(e.maxValue-e.minValue)*t.rightPercent)/e.smallChange)*e.smallChange),e.handler2.elem.style.left=e.width*t.rightPercent+"px",hui.cc("hui_slider_inner",t).style.right=e.width*(1-t.rightPercent)+"px"},setValue:function(i){var e=this;"[object Array]"!==Object.prototype.toString.call(i)&&(i=[e.minValue,i]),e.setLeftValue(i[0]),e.setRightValue(i[1])},getValue:function(){return this.rangeSelection?[this.getLeftValue(),this.getRightValue()]:this.getRightValue()}},hui.inherits(hui.Slider,hui.Control),hui.util.importCssString(".hui_slider {padding-left: 42px;font-size:14px;}.hui_slider .hui_slider_leftinput{width: 22px;padding: 2px 2px 0px;font-size: 13px;text-align: right;}.hui_slider .hui_slider_rightinput{width: 22px;padding: 2px 2px 0px;font-size: 13px;text-align: left;}.hui_slider .hui_slider_leftside{position:absolute;z-index:1;right:100%;padding-right:10px;margin-top:-6px;text-align:right;white-space:nowrap;}.hui_slider .hui_slider_rightside{position:absolute;z-index:1;left:100%;padding-left:10px;margin-top:-6px;text-align:left;white-space:nowrap;}.hui_slider .hui_slider_layer{position:relative;z-index:1;}.hui_slider .hui_slider_scrollbar{border:1px solid #bbb;background-color:#f3f3f9;border-radius:3px;position:relative;z-index:1;height: 5px;}.hui_slider .hui_slider_inner{height:5px;background-color:#fe6502;border-radius:3px;position:absolute;z-index: 1;right: 0px;left: 0px;}.hui_slider .hui_slider_leftpoint,.hui_slider .hui_slider_rightpoint{height:16px;width:16px;position:absolute;z-index:1;top:-5px;margin-left:-9px;cursor:pointer;border:1px solid #99968f;background-color:#fff;border-radius:5px;}.hui_slider .hui_slider_percent{}.hui_slider .hui_slider_ticks{height:40px;}.hui_slider .hui_slider_ticks .hui_slider_unit{position:absolute;z-index:1;font-size:13px;}.hui_slider .hui_slider_ticks .hui_slider_line{display:block;color:transparent;border-left:1px solid #999;height:8px;}.hui_slider .hui_slider_ticks .hui_slider_num{display:block;margin-left:-3px;}")});