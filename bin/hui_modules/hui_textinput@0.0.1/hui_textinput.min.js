"use strict";hui.define.autoload=!0,hui.define("hui_textinput",["hui_control","hui_util"],function(){hui.TextInput=function(e,t){hui.TextInput.superClass.call(this,e,"pending"),void 0!==this.value&&(this.value=String(this.value)),this.useAgent=!1,this.autoHideError=void 0===this.autoHideError?!1:this.autoHideError,this.autoValidate=void 0===this.autoValidate?!1:this.autoValidate,"pending"!=t&&this.enterControl()},hui.TextInput.prototype={doDBC2SBC:function(e){var t="";e=void 0===e||null===e?"":String(e);for(var n=0;n<e.length;n++){var o=e.charCodeAt(n);t+=o>=65281&&65373>=o?String.fromCharCode(e.charCodeAt(n)-65248):12288==o?String.fromCharCode(e.charCodeAt(n)-12288+32):e.charAt(n)}return t},getValue:function(){var e=this,t=e.getInput().value;return e.DBC2SBC&&(t=e.doDBC2SBC(t)),t},setValue:function(e){if(!this.isReadonly()&&!this.isDisabled()){var t=this;e=void 0===e?"":e,t.DBC2SBC&&(e=t.doDBC2SBC(e)),t.getChangeHandler(e),t.getInput().value=e,e?(t.hidePlaceholder(),t.showEye()):(t.showPlaceholder(),t.hideEye())}},setTitle:function(e){this.getMain().setAttribute("title",e)},disable:function(e){"undefined"==typeof e&&(e=!0),e?this.getMain().disabled="disabled":this.getMain().removeAttribute("disabled")},setReadonly:function(e){e=!!e,this.getMain().readOnly=e,this.readonly=e},getInput:function(){var e,t=this,n=t.getMain(),e=t.useAgent?hui.cc(t.getClass("text")):n;return e},getPlaceholder:function(){var e,t=this,n=t.getMain(),e=t.useAgent?hui.cc(t.getClass("placeholder")):hui.util.findSiblingByClassName(n,t.getClass("placeholder"),"pre");return e},getEye:function(){var e,t=this,n=t.getMain(),e=t.useAgent?hui.cc(t.getClass("eye")):hui.util.findSiblingByClassName(n,t.getClass("eye"),"pre");return e},renderInput:function(){var e=this,t=e.getMain(),n='<input type="text" class="#{0}" />';e.useAgent&&hui.appendHTML(t,hui.Control.format(n,e.getClass("text")))},renderPlaceholder:function(){var e=this,t=e.getMain(),n=e.getPlaceholder();n||(n=e.getDocument().createElement("SPAN"),n.className=e.getClass("placeholder"),e.setInnerHTML(n,e.placeholder),e.useAgent?(t.appendChild(n),t.insertBefore(n,t.firstChild)):t.parentNode.insertBefore(n,t.parentNode.firstChild))},renderEye:function(){var e=this,t=e.getMain(),n='<a href="#nogo" onmousedown="hui.Control.getById(\'#{1}\').onmousedown()" onmouseup="hui.Control.getById(\'#{1}\').onmouseup()" class="#{0}">Show</a>',o=e.getEye();o||(o=hui.util.getDom(hui.Control.format(n,e.getClass("eye"),e.getId()))[0],e.useAgent?(t.appendChild(o),t.insertBefore(o,t.firstChild)):t.parentNode.insertBefore(o,t.parentNode.firstChild))},render:function(){hui.TextInput.superClass.prototype.render.call(this);var e=this,t=e.getMain(),n=String(t.tagName).toLowerCase();"input"!==n&&"textarea"!==n&&"password"!==n&&(e.useAgent=!0),e.useAgent&&e.renderInput(),e.placeholder&&e.renderPlaceholder(),e.useEye&&e.renderEye(),e.setSize()},initBehavior:function(){var e=this,t=e.getMain();e.setReadonly(!!e.readonly);var n=e.getInput(),o=e.getPlaceholder();n.value&&o&&(o.style.display="none"),void 0!==e.value&&e.setValue(e.value),t.onpaste=t.onkeydown=e.getPressDownHandler,t.onkeyup=e.getPressUpHandler,t.onkeypress=e.getPressHandler,t.onfocus=e.getFocusHandler,t.onblur=e.getBlurHandler,t.onchange=e.getChangeHandler},getFocusHandler:function(e){var t=this,n=t.getMain?t:hui.Control.getById(t.getAttribute("control"));n.autoHideError&&n.hideError(),n.onfocus(e)},getBlurHandler:function(e){var t=this,n=t.getMain?t:hui.Control.getById(t.getAttribute("control"));n.allowSpace===!1&&n.removeSpace();var o=n.getValue();n.placeholder&&(o?n.hidePlaceholder():n.showPlaceholder()),n.useEye&&(o?n.showEye():n.hideEye()),n.autoValidate&&n.validate(),!o&&n.hideBlankError&&n.hideError(),n.onblur(e)},removeSpace:function(){var e=this,t=e.getValue(),n=t.replace(/\s/gi,"");t!==n&&e.setValue(n)},getPressHandler:function(e){var t=this,n=t.getMain?t:hui.Control.getById(t.getAttribute("control"));e=e||hui.window.event;var o=e.keyCode||e.which;return 13==o?n.onenter():void n.onkeypress(e)},getPressDownHandler:function(e){var t=this,n=t.getMain?t:hui.Control.getById(t.getAttribute("control"));e=e||hui.window.event;var o=e.keyCode||e.which;8!=o&&n.hidePlaceholder("force"),window.setTimeout(function(){n.onkeydown(e)},5)},getPressUpHandler:function(e){var t=this,n=t.getMain?t:hui.Control.getById(t.getAttribute("control")),o=n.getValue();o?n.hidePlaceholder("force"):n.showPlaceholder(),o.indexOf(" ")!==o.length-1&&n.allowSpace===!1&&n.removeSpace(),n.useEye&&(o?n.showEye():n.hideEye()),n.onkeyup(e)},getChangeHandler:function(e){var t=this,n=t.getMain?t:hui.Control.getById(t.getAttribute("control")),o=e&&(e.target||e.srcElement)?n.getMain().value:e;n.onchange(o)},hidePlaceholder:function(e){var t=this,n=t.getInput(),o=t.getPlaceholder();o&&(o.style.display=e===!1?"block":"force"===e?"none":n.value?"none":"block")},showPlaceholder:function(){this.hidePlaceholder(!1)},hideEye:function(e){var t=this,n=t.getInput(),o=t.getEye();o&&(o.style.display=e===!1?"block":"force"===e?"none":n.value?"block":"none")},showEye:function(){this.hideEye(!1)},onkeypress:new Function,onkeydown:new Function,onkeyup:new Function,onenter:new Function,onfocus:new Function,onblur:new Function,onchange:new Function,onmousedown:function(){var e=this,t=e.getMain?e:hui.Control.getById(e.getAttribute("control"));e=t.getMain(),t.old_type=e.type,t.main_text||(t.main_text=document.createElement("SPAN"),t.main_text.innerHTML=e.outerHTML.replace(/type\=\"?password\"?/i,'type="text" '),t.main_text.childNodes[0].style.marginLeft="0px",e.parentNode.appendChild(t.main_text),e.parentNode.insertBefore(t.main_text,e.nextSibling)),t.main_text.childNodes[0].value=e.value,t.main_text.style.display="block",e.style.display="none"},onmouseup:function(){var e=this,t=e.getMain?e:hui.Control.getById(e.getAttribute("control"));e=t.getMain(),e.type=t.old_type||"text",t.main_text&&(t.main_text.style.display="none",e.style.display="block",e.parentNode.removeChild(t.main_text),t.main_text=null)},focusAndSelect:function(){this.getMain().select()},dispose:function(){var e=this.getMain();e.onkeypress=null,e.onchange=null,e.onpropertychange=null,e.onfocus=null,e.onblur=null,hui.Control.prototype.dispose.call(this)}},hui.inherits(hui.TextInput,hui.Control)});